<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>Alta de Película</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Estilos adicionales si es necesario -->
  <link th:href="@{/css/styles.css}" rel="stylesheet" />
</head>

<body>
  <!-- Navbar -->
  <div th:replace="~{fragments/navbar :: navbar}"></div>

  <div class="container mt-5">
    <h1 class="text-center mb-4">Alta de Película</h1>
    <form th:action="@{/cineutn/pelicula/agregar}" method="POST" th:object="${pelicula}">
      <!-- Nombre de película -->
      <div class="input-group mb-3">
        <label class="input-group-text" for="nombre">Nombre</label>
        <input type="text" class="form-control" placeholder="Nombre de la película" th:field="*{nombre}"
          th:classappend="${#fields.hasErrors('nombre')} ? 'is-invalid' : ''" required />
        <div class="invalid-feedback" th:if="${#fields.hasErrors('nombre')}">
          <span th:errors="*{nombre}"></span>
        </div>
      </div>

      <!-- Duración de película -->
      <div class="input-group mb-3">
        <label class="input-group-text" for="duracionMin">Duración (min)</label>
        <input type="number" class="form-control" id="duracionMin" placeholder="ingresar duracion de pelicula en minutos" th:field="*{duracionMin}"
          th:classappend="${#fields.hasErrors('duracionMin')} ? 'is-invalid' : ''" min="1" max="300" required />
        <div class="invalid-feedback" th:if="${#fields.hasErrors('duracionMin')}">
          <span th:errors="*{duracionMin}"></span>
        </div>
      </div>

       <!-- Sinopsis -->
      <div class="input-group mb-3">
        <label class="input-group-text" for="sinopsis">Sinopsis</label>
        <textarea class="form-control" id="sinopsis"
                  placeholder="Breve descripción de la trama..."
                  th:field="*{sinopsis}"
                  th:classappend="${#fields.hasErrors('sinopsis')} ? 'is-invalid' : ''"
                  required></textarea>
        <div class="invalid-feedback" th:if="${#fields.hasErrors('sinopsis')}">
            <span th:errors="*{sinopsis}"></span>
        </div>
      </div>

      <!-- Apto para qué público -->
      <div class="input-group mb-3">
        <label class="input-group-text" for="calif">Clasificación</label>
        <select class="form-select" id="calif"
                th:field="*{calif}"
                th:classappend="${#fields.hasErrors('calif')} ? 'is-invalid' : ''"
                required>
          <option value="">Seleccione una clasificación</option>
          <option th:each="clasif : ${clasificaciones}" 
                  th:value="${clasif}" 
                  th:text="${clasif}">
          </option>
        </select>
        <div class="invalid-feedback" th:if="${#fields.hasErrors('calif')}">
            <span th:errors="*{calif}"></span>
        </div>
      </div>

       <!-- Director -->
      <div class="input-group mb-3">
        <label class="input-group-text" for="director">Director</label>
        <input type="text" class="form-control" id="director"
               placeholder="Ej: Christopher Nolan, Steven Spielberg"
               th:field="*{director}"
               th:classappend="${#fields.hasErrors('director')} ? 'is-invalid' : ''"
               required />
        <div class="invalid-feedback" th:if="${#fields.hasErrors('director')}">
            <span th:errors="*{director}"></span>
        </div>
      </div>

      <!-- Campo Fecha de Estreno -->
      <div class="mb-3 row">
        <label for="fechaEstreno" class="col-sm-2 col-form-label">Fecha de estreno:</label>
        <div class="col-sm-10">
          <input type="date" class="form-control" id="fechaEstreno"
                 th:field="*{fechaEstreno}"
                 th:classappend="${#fields.hasErrors('fechaEstreno')} ? 'is-invalid' : ''"
                 required />
          <div class="invalid-feedback" th:if="${#fields.hasErrors('fechaEstreno')}">
              <span th:errors="*{fechaEstreno}"></span>
          </div>
        </div>
      </div>

      <!-- Botón para enviar -->
      <div class="d-grid gap-2 mt-4">
        <button class="btn btn-success" type="submit">Guardar Película</button>
        <a th:ref ="@{/cineutn/pelicula/peliculascrud}" class="btn btn-secondary"> Cancelar</a> 
      </div>
    </form>
  </div>

  <!-- Footer -->
  <div th:replace="~{fragments/footer :: footer}"></div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Scripts personalizados -->
  <script th:src="@{/js/scripts.js}"></script>
</body>

</html>